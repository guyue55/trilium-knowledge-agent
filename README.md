# TriliumçŸ¥è¯†åº“æ™ºèƒ½ä½“

åŸºäº FastAPI + LangChain + Trilium Notes é›†æˆçš„çŸ¥è¯†é—®ç­”ç³»ç»Ÿã€‚

## ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªé›†æˆäº† Trilium Notes æœ¬åœ°çŸ¥è¯†åº“çš„æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œåˆ©ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆ (RAG) æŠ€æœ¯ï¼Œèƒ½å¤ŸåŸºäºæ‚¨çš„ä¸ªäººçŸ¥è¯†åº“æä¾›ç²¾å‡†çš„å›ç­”ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ä¸ Trilium Notes æ— ç¼é›†æˆ
- æœ¬åœ°è¿è¡Œï¼Œä¿æŠ¤æ‚¨çš„éšç§æ•°æ®
- æ”¯æŒè‡ªç„¶è¯­è¨€é—®ç­”
- è‡ªåŠ¨ç›‘æ§çŸ¥è¯†åº“æ›´æ–°
- å¯¹è¯å†å²è®°å¿†åŠŸèƒ½

## æŠ€æœ¯æ ˆ

- **Webæ¡†æ¶**: FastAPI
- **AIæ¡†æ¶**: LangChain
- **çŸ¥è¯†åº“**: Trilium Notes
- **å‘é‡æ•°æ®åº“**: Chroma (æœ¬åœ°)
- **åµŒå…¥æ¨¡å‹**: sentence-transformers
- **è¯­è¨€æ¨¡å‹**: GPT4All/Llama.cpp (æœ¬åœ°è¿è¡Œ)
- **å‰ç«¯ç•Œé¢**: Streamlit

## ç›®å½•ç»“æ„

```
ğŸ“‚ trilium-knowledge-agent/
â”œâ”€â”€ ğŸ“‚ app/                  # æ ¸å¿ƒåº”ç”¨ä»£ç 
â”‚   â”œâ”€â”€ ğŸ“‚ api/              # API è·¯ç”±å’Œæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ ğŸ“‚ core/             # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ ğŸ“‚ models/           # æ•°æ®æ¨¡å‹
â”‚   â””â”€â”€ ğŸ“‚ utils/            # å·¥å…·å‡½æ•°
â”œâ”€â”€ ğŸ“‚ data/                 # æ•°æ®å­˜å‚¨ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ trilium/          # Trilium ç›¸å…³æ•°æ®
â”‚   â”œâ”€â”€ ğŸ“‚ vector_db/        # å‘é‡æ•°æ®åº“å­˜å‚¨
â”‚   â””â”€â”€ ğŸ“‚ models/           # æœ¬åœ°æ¨¡å‹æ–‡ä»¶
â”œâ”€â”€ ğŸ“‚ frontend/             # å‰ç«¯ç•Œé¢
â”‚   â”œâ”€â”€ ğŸ“„ app.py            # Streamlit åº”ç”¨
â”‚   â”œâ”€â”€ ğŸ“„ requirements.txt  # å‰ç«¯ä¾èµ–
â”‚   â””â”€â”€ ğŸ“„ Dockerfile        # å‰ç«¯ Docker é…ç½®
â”œâ”€â”€ ğŸ“‚ scripts/              # å®ç”¨è„šæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ setup_trilium.py  # Trilium åˆå§‹åŒ–è„šæœ¬
â”‚   â””â”€â”€ ğŸ“„ update_knowledge_base.py  # çŸ¥è¯†åº“æ›´æ–°è„šæœ¬
â”œâ”€â”€ ğŸ“‚ tests/                # æµ‹è¯•ç›®å½•
â”œâ”€â”€ ğŸ“„ requirements.txt      # Python ä¾èµ–
â”œâ”€â”€ ğŸ“„ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â””â”€â”€ ğŸ“„ README.md             # é¡¹ç›®æ–‡æ¡£
```

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### é…ç½®ç¯å¢ƒ

```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶è®¾ç½® Trilium å‡­æ®ç­‰
```

### åˆå§‹åŒ–çŸ¥è¯†åº“

```bash
python scripts/setup_trilium.py
```

### å¯åŠ¨åç«¯æœåŠ¡

```bash
uvicorn app.main:app --reload --port 8000
```

### å¯åŠ¨å‰ç«¯ç•Œé¢

```bash
streamlit run frontend/app.py
```

## ä½¿ç”¨è¯´æ˜

1. ç¡®ä¿ Trilium Notes æ­£åœ¨è¿è¡Œå¹¶ä¸”å¯ä»¥é€šè¿‡ API è®¿é—®
2. é…ç½®å¥½ `.env` æ–‡ä»¶ä¸­çš„ç›¸å…³å‚æ•°
3. åˆå§‹åŒ–çŸ¥è¯†åº“
4. å¯åŠ¨åç«¯æœåŠ¡å’Œå‰ç«¯ç•Œé¢
5. åœ¨å‰ç«¯ç•Œé¢ä¸­è¿›è¡Œé—®ç­”äº¤äº’

## å‰ç«¯ç•Œé¢åŠŸèƒ½

- èŠå¤©å¼äº¤äº’ç•Œé¢
- å¯¹è¯å†å²è®°å½•
- ç­”æ¡ˆæ¥æºå±•ç¤º
- å¯é…ç½®çš„åç«¯ API åœ°å€
- æ¸…é™¤å¯¹è¯å†å²åŠŸèƒ½

## é«˜çº§åŠŸèƒ½

### çŸ¥è¯†åº“è‡ªåŠ¨æ›´æ–°

ç³»ç»Ÿä¼šè‡ªåŠ¨ç›‘æ§ Trilium æ•°æ®ç›®å½•çš„å˜åŒ–ï¼Œå½“æ£€æµ‹åˆ°æ›´æ–°æ—¶ä¼šè‡ªåŠ¨é‡æ–°ç´¢å¼•ç›¸å…³ç¬”è®°ã€‚

### å¯¹è¯å†å²è®°å¿†

ç³»ç»Ÿä¿ç•™å¯¹è¯å†å²ï¼Œèƒ½å¤Ÿåœ¨å¤šè½®å¯¹è¯ä¸­ä¿æŒä¸Šä¸‹æ–‡è¿è´¯æ€§ã€‚

## éƒ¨ç½²

### æœ¬åœ°éƒ¨ç½²

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# åˆå§‹åŒ–çŸ¥è¯†åº“
python scripts/setup_trilium.py

# å¯åŠ¨åç«¯æœåŠ¡
uvicorn app.main:app --reload --port 8000

# å¯åŠ¨å‰ç«¯ç•Œé¢ï¼ˆåœ¨å¦ä¸€ä¸ªç»ˆç«¯ï¼‰
streamlit run frontend/app.py
```

### Docker éƒ¨ç½²

(å¾…å®Œå–„)

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªé¡¹ç›®ã€‚

## è®¸å¯è¯

[MIT](LICENSE)